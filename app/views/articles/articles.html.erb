<%= turbo_frame_tag "articles_list_#{@page}" do %>
  <%= render @articles %>

  <%= turbo_stream.replace "articles_list_#{@pagy.next}" do %>
    <%# update the turbo_frame element with the nexts articles%>
    <%= turbo_frame_tag "articles_list_#{@pagy.next}", target:'_top', src: articles_articles_url(page: @pagy.next), loading: :lazy, class:"min-w-full grid grid-cols-1 md:grid-cols-3 gap-2 my-2" if @pagy.next.present? %>
    
    <% if @pagy.page+1 < @pagy.last %>
      <%# create the turbo_frame element that will recieve the next page of articles %>
      <%= turbo_frame_tag "articles_list_#{@pagy.next+1}" %>
    <%end%>
  <% end %>
<% end %>
